<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin User Management - BHCMS</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Load Heroicons -->
    <script type="module" src="https://unpkg.com/heroicons@2.1.1/dist/solid.js"></script>
    <script type="module" src="https://unpkg.com/heroicons@2.1.1/dist/outline.js"></script>
    
    <style>
        /* Apply Inter font globally */
        html {
            font-family: 'Inter', sans-serif;
        }

        /* --- Collapsible Sidebar Styles (Matches Admin Dashboard) --- */
        #sidebar-nav::-webkit-scrollbar { width: 6px; }
        #sidebar-nav::-webkit-scrollbar-thumb { background: #4a5568; border-radius: 3px; }
        #sidebar-nav::-webkit-scrollbar-track { background: #2d3748; }
        #sidebar-nav { scrollbar-width: thin; scrollbar-color: #4a5568 #2d3748; }
        #sidebar {
            transition: width 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        #main-content {
            transition: margin-left 0.3s ease-in-out;
        }

        @media (min-width: 1024px) {
            /* Collapsed "mini" state */
            #sidebar { width: 5rem; z-index: 50; }
            #main-content { margin-left: 5rem; }
            .sidebar-text, .sidebar-header-text, .sidebar-dropdown-arrow {
                display: none; opacity: 0; transition: opacity 0.2s ease-in-out;
            }
            .sidebar-link-container, .sidebar-header { justify-content: center; }
            #content-menu, #user-menu { display: none !important; }
            
            /* Expanded "hover" state */
            #sidebar:hover { width: 16rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
            #sidebar:hover ~ #main-content { margin-left: 5rem; }
            #sidebar:hover .sidebar-text, 
            #sidebar:hover .sidebar-header-text, 
            #sidebar:hover .sidebar-dropdown-arrow {
                display: inline-block; opacity: 1; transition-delay: 0.1s;
            }
            #sidebar:hover .sidebar-link-container, #sidebar:hover .sidebar-header { justify-content: flex-start; }
            #sidebar:hover #content-menu, #sidebar:hover #user-menu { display: block !important; }
        }

        @media (max-width: 1023px) {
            #sidebar { width: 16rem; transform: translateX(-100%); z-index: 60; }
            #main-content { margin-left: 0; }
            body.sidebar-open #sidebar { transform: translateX(0); }
            .sidebar-text, .sidebar-header-text, .sidebar-dropdown-arrow { display: inline-block; opacity: 1; }
            .sidebar-link-container, .sidebar-header { justify-content: flex-start; }
            #sidebar-backdrop { transition: opacity 0.3s ease-in-out; }
            body:not(.sidebar-open) #sidebar-backdrop { opacity: 0; pointer-events: none; }
            body.sidebar-open #sidebar-backdrop { opacity: 1; pointer-events: auto; }
        }

        /* Modal Styles */
        .modal { transition: opacity 0.3s ease, visibility 0.3s ease; }
        .modal-panel { transition: transform 0.3s ease, opacity 0.3s ease; }
    </style>
</head>
<body class="bg-gray-100">
    <div class="flex h-screen bg-gray-100">

        <!-- 1. Main Navigation (Sidebar) -->
        <aside id="sidebar" class="fixed inset-y-0 left-0 flex flex-col h-screen bg-gray-800 text-gray-200">
            <!-- Sidebar Header -->
            <div class="sidebar-header flex items-center p-4 h-16 border-b border-gray-700 flex-shrink-0">
                <a href="AdminDashboard.html" class="flex items-center space-x-2 overflow-hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 text-teal-400 flex-shrink-0">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" />
                    </svg>
                    <span class="text-xl font-bold text-white sidebar-header-text whitespace-nowrap">
                        Admin
                    </span>
                </a>
                <button id="sidebar-close-btn" class="hidden ml-auto p-1 text-gray-400 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Navigation Links -->
            <nav id="sidebar-nav" class="flex-1 overflow-y-auto">
                <ul class="py-4">
                    <li>
                        <a href="AdminDashboard.html" class="flex items-center px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white">
                            <span class="sidebar-link-container flex items-center w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-3 flex-shrink-0">
                                    <path fill-rule="evenodd" d="M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z" clip-rule="evenodd" />
                                </svg>
                                <span class="sidebar-text whitespace-nowrap">Dashboard</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="Appointment.html" class="flex items-center px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white">
                            <span class="sidebar-link-container flex items-center w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-3 flex-shrink-0">
                                    <path fill-rule="evenodd" d="M6.75 2.25A.75.75 0 017.5 3v1.5h9V3A.75.75 0 0118 3v1.5h.75a3 3 0 013 3v11.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V7.5a3 3 0 013-3H6V3a.75.75 0 01.75-.75zM5.25 6.75c-.621 0-1.125.504-1.125 1.125V18a1.125 1.125 0 001.125 1.125h13.5A1.125 1.125 0 0019.875 18V7.875c0-.621-.504-1.125-1.125-1.125H5.25z" clip-rule="evenodd" />
                                    <path d="M10.5 12a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3z" />
                                </svg>
                                <span class="sidebar-text whitespace-nowrap">Appointments</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="PatientRecords.html" class="flex items-center px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white">
                            <span class="sidebar-link-container flex items-center w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-3 flex-shrink-0">
                                    <path d="M11.7 2.25c.218-.579 1.02-.579 1.238 0l.4 1.063a.75.75 0 00.728.529h1.096c.606 0 1.01.657.733 1.183l-.9.45a.75.75 0 00-.27.803l.4 1.063c.218.579-.188 1.272-.733 1.183h-1.096a.75.75 0 00-.728.529l-.4 1.063c-.218.579-1.02.579-1.238 0l-.4-1.063a.75.75 0 00-.728-.529H7.94c-.606 0-1.01-.657-.733-1.183l.9-.45a.75.75 0 00.27-.803l-.4-1.063c-.218-.579.188-1.272.733-1.183h1.096a.75.75 0 00.728.529l.4-1.063z" />
                                    <path fill-rule="evenodd" d="M12 21a9 9 0 100-18 9 9 0 000 18zm0-1.5c-4.142 0-7.5-3.358-7.5-7.5s3.358-7.5 7.5-7.5 7.5 3.358 7.5 7.5-3.358 7.5-7.5 7.5z" clip-rule="evenodd" />
                                </svg>
                                <span class="sidebar-text whitespace-nowrap">Patient Records</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="MedicalInventory.html" class="flex items-center px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white">
                            <span class="sidebar-link-container flex items-center w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-3 flex-shrink-0">
                                    <path fill-rule="evenodd" d="M5.25 2.25a.75.75 0 01.75.75v1.5H18V3a.75.75 0 011.5 0v1.5H21a.75.75 0 01.75.75v16.5a.75.75 0 01-.75.75H3a.75.75 0 01-.75-.75V5.25a.75.75 0 01.75-.75H4.5V3a.75.75 0 01.75-.75zm0 9v6.75h13.5V11.25H5.25zm0-7.5v6h13.5v-6H5.25z" clip-rule="evenodd" />
                                </svg>
                                <span class="sidebar-text whitespace-nowrap">Inventory</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="Reports.html" class="flex items-center px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white">
                            <span class="sidebar-link-container flex items-center w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-3 flex-shrink-0">
                                    <path d="M12.97 3.97a.75.75 0 011.06 0l7.5 7.5a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 11-1.06-1.06l6.22-6.22H3a.75.75 0 010-1.5h16.19l-6.22-6.22a.75.75 0 010-1.06z" />
                                </svg>
                                <span class="sidebar-text whitespace-nowrap">Reports</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="Inquiries.html" class="flex items-center px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white">
                            <span class="sidebar-link-container flex items-center w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-3 flex-shrink-0">
                                    <path fill-rule="evenodd" d="M4.804 21.644A6.707 6.707 0 006 21.75a6.721 6.721 0 003.583-1.029c.433.09.9.158 1.417.158A6.721 6.721 0 0018 20.72a6.707 6.707 0 001.196.924c.23.16.49.29.766.392A6.715 6.715 0 0021 18.75a6.715 6.715 0 00-2.234-5.02c.088-.45.134-.91.134-1.38C18.9 9.868 15.933 7 12 7S5.1 9.868 5.1 12.3c0 .47.046.93.134 1.38A6.715 6.715 0 003 18.75c0 .613.081 1.21.234 1.77.276-.102.536-.232.766-.392zM12 8.5c3.19 0 5.89 2.494 5.89 5.55 0 .28-.02.556-.059.828a.75.75 0 01-.84.69c-.201-.023-.393-.053-.575-.09a.75.75 0 01-.6-.82c.046-.28.076-.564.076-.858 0-2.24-1.99-4.05-4.442-4.05-2.452 0-4.442 1.81-4.442 4.05 0 .294.03.578.076.858a.75.75 0 01-.6.82c-.182.037-.374.067-.575.09a.75.75 0 01-.84-.69.923.923 0 01-.059-.828C6.11 10.994 8.81 8.5 12 8.5z" clip-rule="evenodd" />
                                </svg>
                                <span class="sidebar-text whitespace-nowrap">Inquiries</span>
                            </span>
                        </a>
                    </li>
                    <li>
                <a href="Healthstatistics.html" class="flex items-center px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white">
                    <span class="sidebar-link-container flex items-center w-full">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-3 flex-shrink-0">
                            <path fill-rule="evenodd" d="M4.804 21.644A6.707 6.707 0 006 21.75a6.721 6.721 0 003.583-1.029c.433.09.9.158 1.417.158A6.721 6.721 0 0018 20.72a6.707 6.707 0 001.196.924c.23.16.49.29.766.392A6.715 6.715 0 0021 18.75a6.715 6.715 0 00-2.234-5.02c.088-.45.134-.91.134-1.38C18.9 9.868 15.933 7 12 7S5.1 9.868 5.1 12.3c0 .47.046.93.134 1.38A6.715 6.715 0 003 18.75c0 .613.081 1.21.234 1.77.276-.102.536-.232.766-.392zM12 8.5c3.19 0 5.89 2.494 5.89 5.55 0 .28-.02.556-.059.828a.75.75 0 01-.84.69c-.201-.023-.393-.053-.575-.09a.75.75 0 01-.6-.82c.046-.28.076-.564.076-.858 0-2.24-1.99-4.05-4.442-4.05-2.452 0-4.442 1.81-4.442 4.05 0 .294.03.578.076.858a.75.75 0 01-.6.82c-.182.037-.374.067-.575.09a.75.75 0 01-.84-.69.923.923 0 01-.059-.828C6.11 10.994 8.81 8.5 12 8.5z" clip-rule="evenodd" />
                        </svg>
                        <span class="sidebar-text whitespace-nowrap">Statistics</span>
                    </span>
                </a>
            </li>
                    
                    <li class="px-4 py-2 mt-2 text-xs font-semibold text-gray-500 uppercase tracking-wider sidebar-text">
                        Management
                    </li>
                    
                    <li>
                        <button id="content-toggle" class="w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white">
                            <span class="sidebar-link-container flex items-center w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-3 flex-shrink-0">
                                    <path fill-rule="evenodd" d="M2.25 13.5a8.25 8.25 0 018.25-8.25.75.75 0 01.75.75v6.75H18a.75.75 0 01.75.75 8.25 8.25 0 01-16.5 0z" clip-rule="evenodd" />
                                    <path fill-rule="evenodd" d="M12.75 3a.75.75 0 01.75-.75 8.25 8.25 0 018.25 8.25.75.75 0 01-.75.75h-6.75a.75.75 0 01-.75-.75V3z" clip-rule="evenodd" />
                                </svg>
                                <span class="sidebar-text whitespace-nowrap">Site Content</span>
                            </span>
                            <svg id="content-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 transition-transform duration-200 sidebar-dropdown-arrow">
                                <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.29a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
                            </svg>
                        </button>
                        <ul id="content-menu" class="hidden bg-gray-700">
                            <li><a href="AdminAnnouncement.html" class="block px-10 py-2 text-sm text-gray-300 hover:bg-gray-600 hover:text-white sidebar-text">Announcements</a></li>
                            <li><a href="AdminServices.html" class="block px-10 py-2 text-sm text-gray-300 hover:bg-gray-600 hover:text-white sidebar-text">Services</a></li>
                            <li><a href="AdminFAQS.html" class="block px-10 py-2 text-sm text-gray-300 hover:bg-gray-600 hover:text-white sidebar-text">FAQs</a></li>
                        </ul>
                    </li>
                    <li>
                        <button id="user-toggle" class="w-full flex items-center justify-between px-4 py-3 bg-gray-700 text-white font-semibold">
                            <span class="sidebar-link-container flex items-center w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-3 flex-shrink-0">
                                    <path fill-rule="evenodd" d="M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" clip-rule="evenodd" />
                                </svg>
                                <span class="sidebar-text whitespace-nowrap">User Management</span>
                            </span>
                            <svg id="user-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 transition-transform duration-200 sidebar-dropdown-arrow rotate-180">
                                <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.29a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
                            </svg>
                        </button>
                        <ul id="user-menu" class="bg-gray-700">
                            <li><a href="DoctorsProfile.html" class="block px-10 py-2 text-sm text-gray-300 hover:bg-gray-600 hover:text-white sidebar-text">Staff</a></li>
                            <li><a href="AdminResidents.html" class="block px-10 py-2 text-sm text-teal-400 font-semibold bg-gray-600 sidebar-text">Residents</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Mobile Sidebar Backdrop -->
        <div id="sidebar-backdrop" class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden"></div>

        <!-- Main Content Wrapper -->
        <div id="main-content" class="flex-1 flex flex-col overflow-hidden">
            
            <!-- 2. Header -->
            <header class="h-16 bg-white shadow-sm border-b border-gray-200 flex items-center justify-between px-6 z-30 flex-shrink-0">
                <button id="sidebar-open-btn" class="lg:hidden p-1 text-gray-600 hover:text-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                    </svg>
                </button>
                
                <div class="hidden md:block">
                    <h1 class="text-xl font-semibold text-gray-800">User Management: Residents</h1>
                    <p class="text-sm text-gray-500">Manage registered users and verifications.</p>
                </div>
                
                <div class="flex items-center space-x-4 ml-auto">
                    <!-- Notifications -->
                    <button class="p-2 bg-gray-100 rounded-full text-gray-500 hover:bg-gray-200 hover:text-gray-700 relative">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
                        </svg>
                        <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
                    </button>
                    
                    <!-- User Profile Dropdown -->
                    <div class="relative">
                        <button id="profile-toggle" class="flex items-center space-x-2">
                            <img src="https://placehold.co/40x40/a5f3fc/083344?text=A" alt="Admin" class="w-10 h-10 rounded-full object-cover border-2 border-gray-200">
                        </button>
                        <div id="profile-menu" class="hidden absolute right-0 top-full mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-100">
                            <a href="AdminProfile.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">My Profile</a>
                            <a href="AdminSettings.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                            <a href="admin_login.html" class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Logout</a>
                        </div>
                    </div>
                </div>
            </header>

            <!-- 4. Main Content Area -->
            <main class="flex-1 overflow-y-auto p-6">
                
                <!-- Action Bar & Filters -->
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                    <div class="flex flex-wrap gap-2 w-full md:w-auto">
                        <select id="filterStatus" class="bg-white border border-gray-300 text-gray-700 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block p-2.5">
                            <option value="all">All Status</option>
                            <option value="Verified">Verified</option>
                            <option value="Pending">Pending</option>
                            <option value="Deactivated">Deactivated</option>
                        </select>
                        <div class="relative w-full md:w-64">
                            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                <svg class="w-4 h-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
                                </svg>
                            </div>
                            <input type="text" id="searchUser" class="block w-full p-2.5 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-white focus:ring-teal-500 focus:border-teal-500" placeholder="Search name or email...">
                        </div>
                    </div>
                    <button data-modal-target="addUserModal" class="flex items-center justify-center py-2 px-4 bg-teal-600 text-white rounded-lg font-medium hover:bg-teal-700 transition shadow-sm w-full md:w-auto">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 mr-2">
                            <path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z" />
                        </svg>
                        Add Resident
                    </button>
                </div>

                <!-- Users Table -->
                <div class="bg-white rounded-lg shadow overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-gray-500">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50 border-b">
                                <tr>
                                    <th scope="col" class="px-6 py-3">Name</th>
                                    <th scope="col" class="px-6 py-3">Email / Contact</th>
                                    <th scope="col" class="px-6 py-3">Date Registered</th>
                                    <th scope="col" class="px-6 py-3">Status</th>
                                    <th scope="col" class="px-6 py-3 text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="userTableBody">
                                <!-- JS will populate this -->
                                <tr>
                                    <td colspan="5" class="px-6 py-4 text-center">Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- === Add/Edit User Modal === -->
    <div id="addUserModal" class="modal fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black bg-opacity-50 hidden">
        <div class="modal-panel w-full max-w-2xl bg-white rounded-xl shadow-2xl border-t-4 border-teal-600">
            <form id="userForm">
                <input type="hidden" id="editUserId" name="id">
                <div class="p-5 border-b flex justify-between items-center">
                    <h3 class="text-2xl font-bold text-teal-800" id="modalTitle">Add New Resident</h3>
                    <button type="button" class="p-2 text-gray-400 hover:text-gray-600" data-modal-close="addUserModal">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
                <div class="p-6 space-y-4 max-h-[70vh] overflow-y-auto">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="userName" class="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                            <input type="text" id="userName" name="name" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-teal-500 focus:border-teal-500">
                        </div>
                        <div>
                            <label for="userDob" class="block text-sm font-medium text-gray-700 mb-1">Date of Birth</label>
                            <input type="date" id="userDob" name="dob" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-teal-500 focus:border-teal-500">
                        </div>
                        <div class="col-span-full">
                            <label for="userAddress" class="block text-sm font-medium text-gray-700 mb-1">Address *</label>
                            <input type="text" id="userAddress" name="address" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-teal-500 focus:border-teal-500" placeholder="House No., Street, Brgy.">
                        </div>
                        <div>
                            <label for="userEmail" class="block text-sm font-medium text-gray-700 mb-1">Email Address *</label>
                            <input type="email" id="userEmail" name="email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-teal-500 focus:border-teal-500">
                        </div>
                        <div>
                            <label for="userPhone" class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                            <input type="tel" id="userPhone" name="phone" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-teal-500 focus:border-teal-500">
                        </div>
                        <div>
                            <label for="userStatus" class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                            <select id="userStatus" name="status" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white">
                                <option value="Pending">Pending</option>
                                <option value="Verified">Verified</option>
                                <option value="Deactivated">Deactivated</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="px-6 py-4 bg-gray-50 border-t flex justify-end space-x-2 rounded-b-xl">
                    <button type="button" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50" data-modal-close="addUserModal">Cancel</button>
                    <button type="submit" class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700">Save User</button>
                </div>
            </form>
        </div>
    </div>

    <!-- === View User Modal === -->
    <div id="viewUserModal" class="modal fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black bg-opacity-50 hidden">
        <div class="modal-panel w-full max-w-lg bg-white rounded-xl shadow-2xl overflow-hidden">
            <div class="bg-teal-600 p-6 text-white">
                <div class="flex items-center gap-4">
                    <div class="w-16 h-16 bg-white text-teal-600 rounded-full flex items-center justify-center text-2xl font-bold" id="viewUserInitials">
                        JD
                    </div>
                    <div>
                        <h2 id="viewUserName" class="text-2xl font-bold">Juan Dela Cruz</h2>
                        <p id="viewUserEmail" class="text-teal-100">juan@example.com</p>
                    </div>
                </div>
            </div>
            <div class="p-6 space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <span class="text-xs text-gray-500 uppercase font-semibold">Status</span>
                        <p id="viewUserStatus" class="text-gray-900 font-medium">Verified</p>
                    </div>
                    <div>
                        <span class="text-xs text-gray-500 uppercase font-semibold">Registered On</span>
                        <p id="viewUserDate" class="text-gray-900 font-medium">Jan 1, 2025</p>
                    </div>
                    <div>
                        <span class="text-xs text-gray-500 uppercase font-semibold">Phone</span>
                        <p id="viewUserPhone" class="text-gray-900 font-medium">0917-123-4567</p>
                    </div>
                    <div>
                        <span class="text-xs text-gray-500 uppercase font-semibold">Birthday</span>
                        <p id="viewUserDob" class="text-gray-900 font-medium">Nov 2, 1990</p>
                    </div>
                    <div class="col-span-2">
                        <span class="text-xs text-gray-500 uppercase font-semibold">Address</span>
                        <p id="viewUserAddress" class="text-gray-900 font-medium">123 Health St., Barangay Malusog, Quezon City</p>
                    </div>
                </div>
                
                <div class="mt-6 pt-6 border-t border-gray-100 flex justify-end gap-2">
                    <button type="button" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50" data-modal-close="viewUserModal">Close</button>
                    <button type="button" id="verifyUserBtn" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Verify User</button>
                </div>
            </div>
        </div>
    </div>

    <!-- === Delete Confirmation Modal === -->
    <div id="deleteConfirmModal" class="modal fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black bg-opacity-70 hidden">
        <div class="modal-panel w-full max-w-sm bg-white rounded-xl shadow-2xl border-t-4 border-red-600">
            <input type="hidden" id="deleteUserId">
            <div class="p-5 border-b text-center">
                <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4">
                    <svg class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-gray-900">Delete Resident?</h3>
            </div>
            <div class="p-6 text-center">
                <p class="text-gray-700">Are you sure you want to delete this resident? This will remove their access to the portal.</p>
            </div>
            <div class="px-6 py-4 bg-gray-50 border-t flex justify-between space-x-2 rounded-b-xl">
                <button type="button" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50" data-modal-close="deleteConfirmModal">Cancel</button>
                <button type="button" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700" id="confirmDeleteBtn">Yes, Delete</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // --- Simple In-Browser DB Logic ---
        const SimpleDB = {
            key: 'bhcms_residents',
            initialData: [
                { id: 1, name: 'Juan Dela Cruz', email: 'juan@example.com', phone: '0917-111-1111', dob: '1990-01-15', address: 'Block 5 Lot 2, Sampaguita St.', dateRegistered: '2025-01-10', status: 'Verified' },
                { id: 2, name: 'Maria Santos', email: 'maria@example.com', phone: '0918-222-2222', dob: '1995-05-20', address: '123 Rizal Avenue', dateRegistered: '2025-01-12', status: 'Pending' },
                { id: 3, name: 'Pedro Penduko', email: 'pedro@example.com', phone: '0919-333-3333', dob: '1988-11-30', address: 'Unit 4B, Green Apartments', dateRegistered: '2025-01-15', status: 'Verified' },
                { id: 4, name: 'Ana Reyes', email: 'ana@example.com', phone: '0920-444-4444', dob: '2000-07-04', address: '789 Mabini St.', dateRegistered: '2025-01-18', status: 'Deactivated' },
                { id: 5, name: 'Jose Rizal', email: 'jose@example.com', phone: '0921-555-5555', dob: '1985-06-19', address: 'Calamba St.', dateRegistered: '2025-01-20', status: 'Pending' },
            ],
            // Get all data
            getAll: function() {
                const data = localStorage.getItem(this.key);
                if (!data) {
                    this.seed(); // Seed if empty
                    return this.initialData;
                }
                return JSON.parse(data);
            },
            // Save/Overwrite all data
            saveAll: function(data) {
                localStorage.setItem(this.key, JSON.stringify(data));
            },
            // Seed initial data
            seed: function() {
                localStorage.setItem(this.key, JSON.stringify(this.initialData));
            },
            // Add new record
            add: function(record) {
                const data = this.getAll();
                record.id = Date.now(); // Generate simple ID
                data.unshift(record);
                this.saveAll(data);
            },
            // Update existing record
            update: function(id, updatedRecord) {
                let data = this.getAll();
                const index = data.findIndex(item => item.id === parseInt(id));
                if (index !== -1) {
                    data[index] = { ...data[index], ...updatedRecord };
                    this.saveAll(data);
                }
            },
            // Delete record
            delete: function(id) {
                let data = this.getAll();
                data = data.filter(item => item.id !== parseInt(id));
                this.saveAll(data);
            }
        };


        document.addEventListener('DOMContentLoaded', () => {
            
            // --- Load Data from DB ---
            let users = SimpleDB.getAll();

            // --- DOM Elements ---
            const tableBody = document.getElementById('userTableBody');
            const filterStatus = document.getElementById('filterStatus');
            const searchInput = document.getElementById('searchUser');
            const formModal = document.getElementById('userForm');
            const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
            const verifyUserBtn = document.getElementById('verifyUserBtn');

            // --- Sidebar Toggle Logic ---
            const sidebar = document.getElementById('sidebar');
            const sidebarOpenBtn = document.getElementById('sidebar-open-btn');
            const sidebarCloseBtn = document.getElementById('sidebar-close-btn');
            const sidebarBackdrop = document.getElementById('sidebar-backdrop');

            if (sidebarOpenBtn) sidebarOpenBtn.addEventListener('click', () => document.body.classList.add('sidebar-open'));
            if (sidebarCloseBtn) sidebarCloseBtn.addEventListener('click', () => document.body.classList.remove('sidebar-open'));
            if (sidebarBackdrop) sidebarBackdrop.addEventListener('click', () => document.body.classList.remove('sidebar-open'));

            // --- Dropdown Logic ---
            const profileToggle = document.getElementById('profile-toggle');
            const profileMenu = document.getElementById('profile-menu');
            if (profileToggle && profileMenu) {
                profileToggle.addEventListener('click', () => profileMenu.classList.toggle('hidden'));
                document.addEventListener('click', (e) => {
                    if (!profileToggle.contains(e.target) && !profileMenu.contains(e.target)) {
                        profileMenu.classList.add('hidden');
                    }
                });
            }
            const contentToggle = document.getElementById('content-toggle');
            const contentMenu = document.getElementById('content-menu');
            const contentArrow = document.getElementById('content-arrow');
            if (contentToggle && contentMenu) {
                contentToggle.addEventListener('click', () => {
                    if (window.innerWidth < 1024) {
                        contentMenu.classList.toggle('hidden');
                        if (contentArrow) contentArrow.classList.toggle('rotate-180');
                    }
                });
            }
            const userToggle = document.getElementById('user-toggle');
            const userMenu = document.getElementById('user-menu');
            const userArrow = document.getElementById('user-arrow');
            if (userToggle && userMenu) {
                userToggle.addEventListener('click', () => {
                    if (window.innerWidth < 1024) {
                        userMenu.classList.toggle('hidden');
                        if (userArrow) userArrow.classList.toggle('rotate-180');
                    }
                });
            }

            // --- Modal Logic ---
            function openModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove('hidden');
                    modal.classList.add('flex');
                    document.body.style.overflow = 'hidden';
                }
            }

            function closeModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                    document.body.style.overflow = 'auto';
                }
            }

            document.querySelectorAll('[data-modal-target]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    if(btn.dataset.modalTarget === 'addUserModal') {
                        document.getElementById('modalTitle').textContent = 'Add New Resident';
                        formModal.reset();
                        document.getElementById('editUserId').value = '';
                    }
                    openModal(btn.dataset.modalTarget);
                });
            });

            document.querySelectorAll('[data-modal-close]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    closeModal(btn.closest('.modal').id);
                });
            });

            // --- Render Table ---
            function renderTable() {
                // Refresh data source
                users = SimpleDB.getAll();
                
                const status = filterStatus.value;
                const search = searchInput.value.toLowerCase();

                const filtered = users.filter(item => {
                    const matchStat = status === 'all' || item.status === status;
                    const matchSearch = item.name.toLowerCase().includes(search) || item.email.toLowerCase().includes(search);
                    return matchStat && matchSearch;
                });

                tableBody.innerHTML = '';

                if (filtered.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="5" class="px-6 py-4 text-center">No residents found.</td></tr>';
                    return;
                }

                filtered.forEach(item => {
                    const row = document.createElement('tr');
                    row.className = 'bg-white border-b hover:bg-gray-50';
                    
                    let statusClass = 'bg-gray-100 text-gray-800';
                    if (item.status === 'Verified') statusClass = 'bg-green-100 text-green-800';
                    else if (item.status === 'Pending') statusClass = 'bg-yellow-100 text-yellow-800';
                    else if (item.status === 'Deactivated') statusClass = 'bg-red-100 text-red-800';

                    row.innerHTML = `
                        <td class="px-6 py-4 font-medium text-gray-900">${item.name}</td>
                        <td class="px-6 py-4">
                            <div class="text-sm text-gray-900">${item.email}</div>
                            <div class="text-xs text-gray-500">${item.phone || 'N/A'}</div>
                        </td>
                        <td class="px-6 py-4">${item.dateRegistered}</td>
                        <td class="px-6 py-4"><span class="${statusClass} text-xs font-medium mr-2 px-2.5 py-0.5 rounded">${item.status}</span></td>
                        <td class="px-6 py-4 text-right">
                            <button class="font-medium text-blue-600 hover:underline mr-3 btn-view" data-id="${item.id}">View</button>
                            <button class="font-medium text-teal-600 hover:underline mr-3 btn-edit" data-id="${item.id}">Edit</button>
                            <button class="font-medium text-red-600 hover:underline btn-delete" data-id="${item.id}">Delete</button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });

                attachActionListeners();
            }

            function attachActionListeners() {
                // View
                document.querySelectorAll('.btn-view').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.dataset.id);
                        const item = users.find(u => u.id === id);
                        if(item) {
                            document.getElementById('viewUserInitials').textContent = item.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
                            document.getElementById('viewUserName').textContent = item.name;
                            document.getElementById('viewUserEmail').textContent = item.email;
                            document.getElementById('viewUserPhone').textContent = item.phone || 'N/A';
                            document.getElementById('viewUserDob').textContent = item.dob || 'N/A';
                            document.getElementById('viewUserAddress').textContent = item.address || 'N/A';
                            document.getElementById('viewUserDate').textContent = item.dateRegistered;
                            document.getElementById('viewUserStatus').textContent = item.status;
                            
                            if (item.status === 'Pending') {
                                verifyUserBtn.classList.remove('hidden');
                                verifyUserBtn.onclick = () => {
                                    // Update DB
                                    SimpleDB.update(id, { status: 'Verified' });
                                    closeModal('viewUserModal');
                                    renderTable();
                                };
                            } else {
                                verifyUserBtn.classList.add('hidden');
                            }

                            openModal('viewUserModal');
                        }
                    });
                });

                // Edit
                document.querySelectorAll('.btn-edit').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.dataset.id);
                        const item = users.find(u => u.id === id);
                        if(item) {
                            document.getElementById('modalTitle').textContent = 'Edit Resident';
                            document.getElementById('editUserId').value = item.id;
                            document.getElementById('userName').value = item.name;
                            document.getElementById('userEmail').value = item.email;
                            document.getElementById('userPhone').value = item.phone;
                            document.getElementById('userDob').value = item.dob;
                            document.getElementById('userAddress').value = item.address;
                            document.getElementById('userStatus').value = item.status;
                            openModal('addUserModal');
                        }
                    });
                });

                // Delete
                document.querySelectorAll('.btn-delete').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.dataset.id);
                        document.getElementById('deleteUserId').value = id;
                        openModal('deleteConfirmModal');
                    });
                });
            }

            // --- Form Handlers ---
            formModal.addEventListener('submit', (e) => {
                e.preventDefault();
                const formData = new FormData(formModal);
                const id = document.getElementById('editUserId').value;
                const userRecord = {
                    name: formData.get('name'),
                    email: formData.get('email'),
                    phone: formData.get('phone'),
                    dob: formData.get('dob'),
                    address: formData.get('address'),
                    status: formData.get('status')
                };

                if (id) {
                    // Update
                    SimpleDB.update(id, userRecord);
                } else {
                    // Create
                    userRecord.dateRegistered = new Date().toISOString().split('T')[0];
                    SimpleDB.add(userRecord);
                }

                closeModal('addUserModal');
                renderTable();
            });

            confirmDeleteBtn.addEventListener('click', () => {
                const id = parseInt(document.getElementById('deleteUserId').value);
                SimpleDB.delete(id);
                closeModal('deleteConfirmModal');
                renderTable();
            });

            // --- Filter Listeners ---
            filterStatus.addEventListener('change', renderTable);
            searchInput.addEventListener('input', renderTable);

            // --- Initial Load ---
            renderTable();
        });
    </script>
</body>
</html>